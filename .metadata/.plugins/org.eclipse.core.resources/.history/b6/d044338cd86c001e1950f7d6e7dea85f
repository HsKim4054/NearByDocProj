<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.patient">



	<select id="selectPatient" parameterType="String" resultType="Patient">
	<![CDATA[
		select * from patient where pemail=#{pemail}
	]]>
	</select>
	
	<!-- 환자 - 내 정보 조회 -->
	<select id="selectPatientByPidnum" parameterType="String" resultType="Patient">
	<![CDATA[
		select * 
		 from patient 
		where 1=1
		  and pidnum=#{pidnum}
	]]>
	</select>
	
	
	<!-- 환자 - 내 정보 수정 -->
	<update id="updatePatient" parameterType="Patient">
	<![CDATA[
	update patient set pname = #{pname}, ptel = #{ptel}, pemail = #{pemail}, proadaddress = #{proadaddress}
	where pidnum = #{pidnum}
	]]>
	</update>
	
	
	

	<insert id="insertPatient" parameterType="Patient">
	
	<![CDATA[
	insert into patient (pidnum,pemail,ppassword,pname,ptel,proadaddress,pdetailaddress,ppostcode) values (#{pidnum},#{pemail},#{ppassword},#{pname},#{ptel},#{proadaddress},#{pdetailaddress},#{ppostcode}) 
	]]>
	</insert>
	
	<select id="selectPatientList" parameterType="Integer" resultType="Patient">
	<![CDATA[
	select * from patient order by pname
	limit #{row},10
	]]>
	</select>
	
	
	
	<select id="selectPatientCount" resultType="Integer">
      <![CDATA[
         select count(pidnum) from patient
      ]]>
    
   </select>
   
   
	

	
	<select id="searchPatientList" parameterType="hashmap" resultType="Patient">
	
	select * from patient
	where ${type} like '%${keyword}%' order by pname
	limit #{row},10
	
	</select>
	
   <select id="searchPatientCount" parameterType="hashmap" resultType="Integer">
   	select count(*) from patient
   	where ${type} like '%${keyword}%' 
   </select>
   
   
   <delete id="deletePatient" parameterType="String">
   <![CDATA[
   
   	delete from patient where pname=#{pname} 
   
   ]]>
   
   
   </delete>
   
   <select id="selectPatient" parameterType="String" resultType="Patient">
	<![CDATA[
		select * from patient where pname=#{pname}
	]]>
	</select>
	
	
</mapper>