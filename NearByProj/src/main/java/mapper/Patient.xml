<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.patient">



	<select id="selectPatient" parameterType="String"
		resultType="Patient">
	<![CDATA[
		select * from patient where pidnum=#{pidnum}
	]]>
	</select>
	
	<!-- 환자 내 정보 조회 -->
	<select id="selectPatientByPidnum" parameterType="String" resultType="Patient">
	<![CDATA[
		select * 
		 from patient 
		where 1=1
		  and pidnum=#{pidnum}
	]]>
	</select>
	
	
	

	<insert id="insertPatient" parameterType="Patient">
	
	<![CDATA[
	insert into patient (pemail,pidnum,ppassword,pname,ptel,proadaddress,pdetailaddress,ppostcode) values (#{pemail},#{pidnum},#{ppassword},#{pname},#{ptel},#{proadaddress},#{pdetailaddress},#{ppostcode}) 
	]]>
	</insert>
	
	<select id="selectPatientList" parameterType="String" resultType="Patient">
	<![CDATA[
	select pidnum,pemail,ppassword,pname,ptel,ppostcode,(concat(proadaddress,pdetailaddress)as address)) from patient order by pidnum
	limit #{row},10
	]]>
	</select>
	
	
	<select id="selectPatientCount" resultType="Integer">
      <![CDATA[
         select count(num) from patient
      ]]>
    
   </select>
	

	
	<select id="searchPatientList" parameterType="hashmap" resultType="Patient">
	
	select * from patient
	where ${type} like '%${keyword}%' order by pidnum desc
	limit #{row},10
	
	</select>
	
   <select id="searchPatientCount" parameterType="hashmap" resultType="Integer">
   	select count(*) from patient
   	where ${type} like '%${keyword}%' 
   </select>
   
   
   <delete id="deletePatient" parameterType="Integer">
   <![CDATA[
   
   	delete from patient where pidnum=#{pidnum} 
   ]]>
   
   
   </delete>
   
	
	
</mapper>