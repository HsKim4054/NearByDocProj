<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.patient">

	<select id="selectPatient" parameterType="String"
		resultType="Patient">
	<![CDATA[
		select * from patient where pemail=#{pemail}
	]]>
	</select>
	
	<!-- 환자 내 정보 조회 -->
	<select id="selectPatientByPidnum" parameterType="String" resultType="Patient">
	<![CDATA[
		select * 
		 from patient 
		where 1=1
		  and pidnum=#{pidnum}
	]]>
	</select>
	
	
	
	<insert id="insertPatient" parameterType="Patient">
	<![CDATA[
	insert into patient (pidnum,pemail,ppassword,pname,ptel,proadaddress,ppostcode,pdetailaddress) values (#{pidnum},#{pemail},#{ppassword},#{pname},#{ptel},#{proadaddress},#{ppostcode},#{pdetailaddress}) 
	]]>
	</insert>
	
	<select id="selectPatientList" parameterType="Integer" resultType="Patient">
	<![CDATA[
	select pidnum,pemail,pname,ptel,proadaddress,ppostcode,pdetailaddress from patient order by num desc
	limit #{row},10
	]]>
	</select>
	
	
   <select id="selectSearchCount" resultType="Integer">
      <![CDATA[
         select count(num) from patient
      ]]>
      
   </select>
	
	<select id="searchPatientList" parameterType="hashmap" resultType="Patient">
	
	select * from patient
	where ${type} like '%${keyword}%' order by num desc
	limit #{row},10
	
	</select>
	
   <select id="searchPatientCount" parameterType="hashmap" resultType="Integer">
   	select count(*) from patient
   	where ${type} like '%${keyword}%' 
   </select>
	
	
</mapper>